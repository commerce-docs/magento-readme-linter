name: 'Readme Linter'
description: 'Validates README files in modules using super-linter'

runs:
  using: "composite"
  steps:
    - name: Checkout Code
      uses: actions/checkout@v4
      with:
        fetch-depth: 0

    - name: Setup reviewdog
      uses: reviewdog/action-setup@v1
      with:
        reviewdog_version: latest

    - name: Load super-linter configuration
      shell: bash
      run: cat .github/super-linter.env >> "$GITHUB_ENV"

    - name: Lint Code Base with super-linter and reviewdog
      uses: super-linter/super-linter/slim@v7.2.1
      env:
        GITHUB_TOKEN: ${{ github.token }}
        # REVIEWDOG_GITHUB_API_TOKEN: ${{ github.token }}
        # Enable super-linter environment variables
        # VALIDATE_ALL_CODEBASE: false
        # FILTER_REGEX_INCLUDE: README\.md$
        # LOG_LEVEL: DEBUG
      continue-on-error: true

    - name: Report linting results with reviewdog
      shell: bash
      run: |
        cat "${DEFAULT_WORKSPACE}/${SUPER_LINTER_OUTPUT_DIRECTORY_NAME}/super-linter"
      #   if [ -f "${DEFAULT_WORKSPACE}/${SUPER_LINTER_OUTPUT_DIRECTORY_NAME}/super-linter" ]; then
      #     cat "${DEFAULT_WORKSPACE}/${SUPER_LINTER_OUTPUT_DIRECTORY_NAME}/super-linter" | reviewdog -f=super-linter -reporter=github-pr-review -fail-on-error=false
      #   fi
      # env:
      #   REVIEWDOG_GITHUB_API_TOKEN: ${{ github.token }}
